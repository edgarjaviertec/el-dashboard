{% extends "/layouts/backend-base.twig" %}
{% block styleSheets %}
    <link rel="stylesheet" href="/assets/css/bs4-switches.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">
{% endblock %}
{% block content %}
    {% if flashMessages is defined %}
        {{ flashMessages|raw }}
    {% endif %}

    {% if ["permiso1","permiso2","permiso3"] is inUserPermissions %}
        SI puede matar
    {% else %}
        NO puede matar
    {% endif %}

    <div class="title-block">
        <div class="row">
            <div class="col-md-6">
                <h3 class="title">
                    <span>Permisos</span>
                    <a href="/backend/permissions/create" class="ml-2 btn btn-primary btn-sm rounded-s">Nuevo permiso</a>
                </h3>
                <p class="mb-0 title-description">Agregue, modifique o elimine permisos</p>
            </div>
        </div>
    </div>
    <hr>
    <table id="dataTable" class="table table-striped table-bordered" style="width:100%">
        <thead>
        <tr>
            <th>Id</th>
            <th>Permiso</th>
            <th>Nombre</th>
            <th>Descripci√≥n</th>
            <th class="no-sort">Acciones</th>
        </tr>
        </thead>
        <tbody>
        {% for permission in permissions %}
            {% set permIndex = loop.index %}
            <tr>
                <td class="align-middle">
                    {{ permission.id }}
                </td>
                <td class="align-middle">
                    {{ permission.name }}
                </td>
                <td class="align-middle">
                    {{ permission.display_name }}
                </td>

                <td class="align-middle">
                    {{ permission.description }}
                </td>
                <td class="align-middle">
                    <a href="/backend/permissions/{{ permission.id }}/edit" class="btn btn-primary"><i class="fas fa-edit"></i></a>
                    <form class="d-inline" method="POST" action="/backend/permissions/destroy">
                        <input type="hidden" name="id" value="{{ permission.id }}">
                        <button type="submit" class="btn btn-danger"><i class="fas fa-trash-alt"></i></button>
                    </form>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
{% block javaScripts %}
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var table = $('#dataTable').DataTable({
                "columnDefs": [{
                    "targets": 'no-sort',
                    "orderable": false,
                }]
            });

        });
    </script>
{% endblock %}